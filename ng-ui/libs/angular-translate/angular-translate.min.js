angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(t){var e=t.storageKey(),r=t.storage();r?r.get(e)?t.uses(r.get(e)):angular.isString(t.preferredLanguage())?t.uses(t.preferredLanguage()):r.set(e,t.uses()):angular.isString(t.preferredLanguage())&&t.uses(t.preferredLanguage())}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(t){var e,r,a,n,s,i,o,u,l={},g=t,c=".",f=function(t,e){if(!t&&!e)return l;if(t&&!e){if(angular.isString(t))return l[t];angular.extend(l,d(t))}else angular.isObject(l[t])||(l[t]={}),angular.extend(l[t],d(e))},d=function(t,e,r){var a,n,s;e||(e=[]),r||(r={});for(a in t)t.hasOwnProperty(a)&&(s=t[a],angular.isObject(s)?d(s,e.concat(a),r):(n=e.length?""+e.join(c)+c+a:a,r[n]=s));return r};this.translations=f,this.preferredLanguage=function(t){return t?(e=t,void 0):e},this.fallbackLanguage=function(t){return t?(r=t,void 0):r},this.uses=function(t){if(!t)return a;if(!l[t]&&!o)throw Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");a=t};var h=function(t){return t?(g=t,void 0):s?s+g:g};this.storageKey=h,this.useUrlLoader=function(t){this.useLoader("$translateUrlLoader",{url:t})},this.useStaticFilesLoader=function(t){this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){o=t,u=e||{}},this.useLocalStorage=function(){this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){this.useStorage("$translateCookieStorage")},this.useStorage=function(t){n=t},this.storagePrefix=function(t){return t?(s=t,void 0):t},this.useMissingTranslationHandlerLog=function(){this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){i=t},this.$get=["$interpolate","$log","$injector","$rootScope","$q",function(t,s,g,c,d){var p,$=!1;if(n&&(p=g.get(n),!p.get||!p.set))throw Error("Couldn't use storage '"+n+"', missing get() or set() method!");var v=function(e,n){var s=a?l[a]:l;if(s&&s.hasOwnProperty(e))return t(s[e])(n);if(i&&!$&&g.get(i)(e,a),a&&r&&a!==r){var o=l[r][e];if(o)return t(o)(n)}return e};return v.preferredLanguage=function(){return e},v.fallbackLanguage=function(){return r},v.storage=function(){return p},v.uses=function(t){if(!t)return a;var e=d.defer();return l[t]?(a=t,n&&p.set(v.storageKey(),a),e.resolve(a),c.$broadcast("translationChangeSuccess"),e.promise):($=!0,g.get(o)(angular.extend(u,{key:t})).then(function(r){var s={};angular.isArray(r)?angular.forEach(r,function(t){angular.extend(s,t)}):angular.extend(s,r),f(t,s),a=t,n&&p.set(v.storageKey(),a),$=!1,c.$broadcast("translationChangeSuccess"),e.resolve(a)},function(t){c.$broadcast("translationChangeError"),e.reject(t)}),e.promise)},v.storageKey=function(){return h()},o&&angular.equals(l,{})&&v.uses(v.uses()),v}]}]),angular.module("pascalprecht.translate").directive("translate",["$filter","$interpolate",function(t,e){var r=t("translate");return{restrict:"A",scope:!0,link:function(t,a,n){n.$observe("translate",function(r){t.translationId=angular.equals(r,"")?e(a.text().replace(/^\s+|\s+$/g,""))(t.$parent):r}),n.$observe("values",function(e){t.interpolateParams=e}),t.$on("translationChangeSuccess",function(){a.html(r(t.translationId,t.interpolateParams))}),t.$watch("translationId + interpolateParams",function(e){e&&a.html(r(t.translationId,t.interpolateParams))})}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(t,e){return function(r,a){return angular.isObject(a)||(a=t(a)()),e(r,a)}}]);